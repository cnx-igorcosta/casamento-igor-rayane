var App=angular.module("casamentoApp",["ngResource","autocomplete","ngScrollbars","angularMask"]);
App.controller("confirmacaoCtrl",function(a,e){var d=e("/api/convidados",null,{update:{method:"PUT"},get:{method:"GET",isArray:!0}});a.convidado={};a.nomes=[];a.convidados=[];a.respostaEnviada=void 0;a.mostrarTabela=!1;a.isLoading=!1;a.mostrarFormConfirmacao=!1;a.mostrarMensagem=!1;a.mensagem="";a.emailVazio=!1;a.telefoneVazio=!1;a.iniciar=function(){d.query(function(b){for(var c=0;c<b.length;c++)a.nomes.push(b[c].nome)})};a.iniciar();a.buscarConvidado=function(b,c){c.preventDefault();a.isLoading=
!0;a.mostrarTabela=!1;a.convidados=[];a.respostaEnviada=void 0;a.mostrarFormConfirmacao=!1;a.mostrarMensagem=!1;a.emailVazio=!1;a.telefoneVazio=!1;b?e("/api/convidados/:nome",{nome:"@nome"},{get:{method:"GET",isArray:!0}}).get({nome:b},function(c){for(var b=0;b<c.length;b++)a.convidados.push(c[b]);a.mostrarTabela=!0;a.isLoading=!1}):a.isLoading=!1};a.responder=function(b,c){b.preventDefault();a.mostrarTabela=!1;a.mostrarFormConfirmacao=!0;a.convidado=c};a.confirmarPresenca=function(b,c,f){b.preventDefault();
a.emailVazio=!1;a.telefoneVazio=!1;b=!0;c.email&&""!==c.email||(a.emailVazio=!0,b=!1);c.telefone&&""!==c.telefone||(a.telefoneVazio=!0,b=!1);b&&(d.update({_id:c._id,email:c.email,telefone:c.telefone,confirmado:f}),c.confirmado=f,a.mostrarFormConfirmacao=!1,a.mostrarMensagem=!0,a.mensagem="Resposta enviada com sucesso!",a.nome="")};a.mostrarStatus=function(b){return void 0!=b.confirmado?a.respostaEnviada=!0:!1};a.cancelar=function(b){b.preventDefault();a.convidados=[];a.mostrarTabela=!1;a.nome="";
a.mostrarFormConfirmacao=!1;a.mostrarMensagem=!1;a.mensagem="";a.convidado={}}});
App.controller("muralCtrl",function(a,e){var d=e("/api/mensagens/:_id/:nome/:texto",{_id:"@_id",nome:"@nome",texto:"@texto"},{update:{method:"PUT"}});a.config={autoHideScrollbar:!1,theme:"dark",advanced:{updateOnContentResize:!0},setHeight:400,scrollInertia:0};a.mensagem={};a.mensagens=[];a.camposObrigatorios=!1;a.showFormMural=!1;a.sending=!1;a.showMural=function(b){b.preventDefault();a.camposObrigatorio=!1;a.showFormMural=!0};a.iniciarMensagem=function(){d.query(function(b){a.mensagens=b})};a.iniciarMensagem();
a.hasMensagem=function(){return 0<a.mensagens.length};a.salvarMensagem=function(b,c){b.preventDefault();a.camposObrigatorios=!1;a.sending=!0;c.nome&&c.texto?c._id?(d.update({_id:c._id,nome:c.nome,texto:c.texto}),angular.forEach(a.mensagens,function(b,d){b._id===c._id&&(b.nome=c.nome,b.texto=c.texto,a.mensagem={},a.sending=!0)})):d.save({nome:c.nome,texto:c.texto},function(b){a.mensagens.splice(0,0,c);c._id=b._id;c.data=b.createdAt;a.mensagem={};a.sending=!0}):(a.camposObrigatorios=!0,a.sending=!0)};
a.cancelarMensagem=function(b){b.preventDefault();a.camposObrigatorio=!1;a.showFormMural=!1;a.mensagem={}}});App.directive("autoComplete",function(a){return function(e,d,b){$(d).autocomplete({source:e[b.uiItems],select:function(){a(function(){d.trigger("input")},0)}})}});
