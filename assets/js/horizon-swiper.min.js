(function(e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof exports?e(require("jquery")):e(jQuery)})(function(e){var q={item:".horizon-item",showItems:"auto",dots:!1,numberedDots:!1,arrows:!0,arrowPrevText:"",arrowNextText:"",animationSpeed:500,mouseDrag:!0,oneDotTwoItems:!1,onStart:function(){},onEnd:function(){},onSlideStart:function(){},onSlideEnd:function(){},onDragStart:function(){},onDragEnd:function(){}},f=e(window),l=e(document),n=['<button class="horizon-prev">',
"</button>"],p=['<button class="horizon-next">',"</button>"],r=function(){function d(a,b){var c=this;c.settings=e.extend({},q,b);c.$element=e(a);c.$items=c.$element.find(this.settings.item);c.$inner=null;c.$outer=null;c.$dots=null;c.$arrowPrev=null;c.$arrowNext=null;c.initialized=!1;c.maxHeight=0;c.innerContainerWidth=0;c.viewportSize=0;c.isAnimate=!1;var g=function h(){c.initialized?c._setSizes():setTimeout(function(){h()},1E3)};l.ready(function(){c.init()});f.load(function(){g()})}d.prototype.init=
function(){this._setWrapper();this._addArrows();this._addDots();this._mouseDrag();this._setSizes();this._resize();this._checkPosition();this.initialized=!0};d.prototype._setSizes=function(){for(var a=this.innerContainerWidth=this.maxHeight=0;a<this.$items.length;++a){var b=e(this.$items[a]),c=b.outerHeight(!0),b=b.outerWidth(!0);c>this.maxHeight&&(this.maxHeight=c);this.innerContainerWidth+=b}this.viewportSize=this.$inner.width();this.$outer.css({"max-height":this.maxHeight+"px"});this.viewportSize<
this.innerContainerWidth?(this.$element.addClass("initialized"),this.settings.arrows&&this.$element.addClass("arrows"),this.settings.dots&&this.$element.addClass("dots")):(this.$element.removeClass("initialized"),this.$element.addClass("arrows"))};d.prototype._resize=function(){var a=this;f.resize(function(){clearTimeout(null);setTimeout(function(){a._setSizes();a._checkPosition()},250)})};d.prototype._setWrapper=function(){var a;this.$items.wrapAll('<div class="horizon-outer">');this.$items.wrapAll('<div class="horizon-inner">');
this.$inner=this.$element.find(".horizon-inner");this.$outer=this.$element.find(".horizon-outer");"auto"!==this.settings.showItems&&this.settings.showItems===parseInt(this.settings.showItems,10)&&(a=100/this.settings.showItems,this.$items.css({width:a+"%"}));for(a=0;a<this.$items.length;++a)e(this.$items[a]).attr("data-horizon-index",a)};d.prototype._addDots=function(){var a=this;if(a.settings.dots){a.$dots=e('<nav class="horizon-dots"></nav>');for(var b=0;b<a.$items.length;++b){var c=e('<button class="horizon-dot" data-horizon-target="'+
b+'">'+(a.settings.numberedDots?b:"")+"</button>");!this.settings.oneDotTwoItems||b%2?this.settings.oneDotTwoItems||a.$dots.append(c):a.$dots.append(c)}a.$element.append(a.$dots);a.$dots.find("button").on("click",function(b){b.preventDefault();b=e(this).attr("data-horizon-target");a._dotScroll(b)})}};d.prototype._dotScroll=function(a){var b=this;b.$dots.find('[data-horizon-index="'+a+'"]').outerWidth(!0);var c=0;b.isAnimate=!0;b.settings.onSlideStart();for(var g=0;g<b.$items.length;++g)g<a&&(c+=e(b.$items[g]).outerWidth(!0));
b.$inner.animate({scrollLeft:c},b.settings.animationSpeed,function(){b._checkPosition();b.settings.onSlideEnd();if(a===b.$items.length)b.settings.onEnd();else if(0===a)b.settings.onStart();b.isAnimate=!1})};d.prototype._addArrows=function(){var a=this;!0===a.settings.arrows&&(a.$arrowPrev=e(n[0]+a.settings.arrowPrevText+n[1]),a.$arrowNext=e(p[0]+a.settings.arrowNextText+p[1]),a.$arrowNext.insertAfter(a.$outer),a.$arrowPrev.insertAfter(a.$outer),a.$element.addClass("first-item"),a.$arrowPrev.attr("disabled",
"disabled"),a.$arrowPrev.on("click",function(b){b.preventDefault();a.isAnimate||a._scrollTo("previous")}),a.$arrowNext.on("click",function(b){b.preventDefault();a.isAnimate||a._scrollTo("next")}))};d.prototype._scrollTo=function(a){var b=this,c=b._getOffset(a);b.isAnimate=!0;"end"===c||"start"===c?b.isAnimate=!1:(b.settings.onSlideStart(),b.$inner.animate({scrollLeft:c[0]},b.settings.animationSpeed,function(){if("end"===c[1])b.settings.onEnd();else if("start"===c[1])b.settings.onStart();b._checkPosition();
b.settings.onSlideEnd();b.isAnimate=!1}))};d.prototype._getOffset=function(a){var b=this.$inner.scrollLeft(),c=0,g=b+this.viewportSize;if("next"===a&&b+this.viewportSize===this.innerContainerWidth)return"end";if("previous"===a&&0===b)return"start";for(var d=0;d<this.$items.length;++d){var h=e(this.$items[d]).outerWidth(!0),k="",c=c+h;if("next"===a&&c>g)return d+1===this.$items.length&&(k="end"),[c-this.viewportSize,k];if("previous"===a&&c>=b)return 0>=c-h&&(k="start"),[c-h,k]}};d.prototype._mouseDrag=
function(){var a=this,b=!1,c=!1,e=0,d=0;a.$inner.offset();var h=0,k=!1,m=!1,f=null;a.$element.on({touchstart:function(c){m=k=b=!0;a.settings.onDragStart()}});l.on({touchend:function(b){k&&(a._checkPosition(),a.settings.onDragEnd(),k=!1)}});a.$inner.scroll(function(){clearTimeout(f);f=setTimeout(function(){m&&(a._checkPosition(),a.settings.onDragEnd(),m=!1)},250)});a.settings.mouseDrag&&!b&&(a.$element.addClass("mouse-drag"),a.$element.on({mousedown:function(b){c=!0;e=b.pageX;d=a.$inner.scrollLeft();
if("button"!==b.target.tagName.toLowerCase())a.settings.onDragStart()}}),l.on({mousemove:function(g){c&&!b&&(h=d+(e-g.pageX),a.$inner.scrollLeft(h))},mouseup:function(b){c&&"button"!==b.target.tagName.toLowerCase()&&(a._checkPosition(),a.settings.onDragEnd());c=!1}}))};d.prototype._checkPosition=function(){var a=this.$inner.scrollLeft();this.settings.arrows&&this._checkArrowState(a);this.settings.dots&&this._checkActiveDots(a)};d.prototype._checkActiveDots=function(a){var b=0,c=0;a=[a,a+this.viewportSize];
for(var d=0;d<this.$items.length;++d){var f=e(this.$items[d]).outerWidth(!0),c=c+f;b+f/2>=a[0]&&c-f/2<=a[1]?this.$dots.find('[data-horizon-target="'+d+'"]').addClass("active"):this.$dots.find('[data-horizon-target="'+d+'"]').removeClass("active");b+=f}};d.prototype._checkArrowState=function(a){a+this.viewportSize>=this.innerContainerWidth-1?(this.$element.addClass("last-item"),this.$arrowNext.attr("disabled","disabled"),this.$element.removeClass("first-item"),this.$arrowPrev.removeAttr("disabled")):
(0>=a?(this.$element.addClass("first-item"),this.$arrowPrev.attr("disabled","disabled"),this.$element.removeClass("last-item")):(this.$element.removeClass("last-item").removeClass("first-item"),this.$arrowPrev.removeAttr("disabled")),this.$arrowNext.removeAttr("disabled"))};return d}();e.fn.horizonSwiper=function(d){this.each(function(){e.data(this,"horizonSwiper")||e.data(this,"horizonSwiper",new r(this,d))});return this}});
