angular.module("angularMask",[]).directive("angularMask",function(){return{restrict:"A",require:"ngModel",scope:{isModelValueEqualViewValues:"="},link:function(g,h,k,b){function f(a){var b=k.angularMask,c=b.split("|");1<c.length&&c.sort(function(a,b){return a.length-b.length});if(null===a||""==a)return"";a=String(a).replace(/\D/g,"");if(1<c.length)for(var d in c)if(a.replace(/\D/g,"").length<=c[d].replace(/\D/g,"").length){b=c[d];break}for(var c="",e=d=0;e<b.length&&a[d];)b[e].match(/\D/)?c+=b[e]:
(c+=a[d],d++),e++;return c}g.$watch(function(){return k.angularMask},function(a){null!=b.$viewValue&&(b.$viewValue=f(String(b.$viewValue).replace(/\D/g,"")),h.val(b.$viewValue))});b.$formatters.push(function(a){return null===a?"":f(String(a).replace(/\D/g,""))});b.$parsers.push(function(a){b.$viewValue=f(a);a=g.isModelValueEqualViewValues?b.$viewValue:String(a).replace(/\D/g,"");h.val(b.$viewValue);return a})}}});
